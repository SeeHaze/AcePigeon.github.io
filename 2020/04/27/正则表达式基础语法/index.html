<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>正则表达式参考 | Moyuu的笔记</title>

  
  <meta name="author" content="Moyuu">
  

  
  <meta name="description" content="写在前面
日常开发中经常会用到正则表达式，对于正则表达式，很多人第一感觉是“啥啥啥？这写的啥？”，一堆乱七八糟的字符组合，完全不知所云。但是其实了解了语法之后就会发现，其实正则不难写，也不是很难懂。本文是我的一篇关于正则表达式基础语法的汇总笔记，主要包括：元字符、字符转义、重复、字符集合、分枝条件、反义、分组、后向引用、零宽断言等共计9个小知识点，每个小知识点都有很多栗子可以食用。">
  

  
  
  <meta name="keywords" content="">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="正则表达式参考"/>

  <meta property="og:site_name" content="Moyuu的笔记"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Moyuu的笔记" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
<meta name="generator" content="Hexo 4.2.0"></head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Moyuu的笔记</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
        <li><a href="/categories">分类</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>正则表达式参考</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2020/04/27/正则表达式基础语法/" rel="bookmark">
        <time class="entry-date published" datetime="2020-04-27T10:07:56.000Z">
          2020-04-27
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a><strong>写在前面</strong></h2><blockquote>
<p>日常开发中经常会用到正则表达式，对于正则表达式，很多人第一感觉是“啥啥啥？这写的啥？”，一堆乱七八糟的字符组合，完全不知所云。但是其实了解了语法之后就会发现，其实正则不难写，也不是很难懂。<br>本文是我的一篇关于正则表达式基础语法的汇总笔记，主要包括：<strong>元字符</strong>、<strong>字符转义</strong>、<strong>重复</strong>、<strong>字符集合</strong>、<strong>分枝条件</strong>、<strong>反义</strong>、<strong>分组</strong>、<strong>后向引用</strong>、<strong>零宽断言</strong>等共计9个小知识点，每个小知识点都有很多栗子可以食用。</p>
</blockquote>
<a id="more"></a>

<h2 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a><strong>元字符</strong></h2><table>
<thead>
<tr>
<th>代码</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>匹配除换行符以外的任意字符</td>
</tr>
<tr>
<td>\w</td>
<td>匹配字母或数字或下划线或汉字</td>
</tr>
<tr>
<td>\s</td>
<td>匹配任意的空白符，包括空格，制表符(Tab)，换行符，中文全角空格等</td>
</tr>
<tr>
<td>\d</td>
<td>匹配数字</td>
</tr>
<tr>
<td>\b</td>
<td>匹配单词的开始或结束</td>
</tr>
<tr>
<td>^</td>
<td>匹配字符串的开始</td>
</tr>
<tr>
<td>$</td>
<td>匹配字符串的结</td>
</tr>
</tbody></table>
<p>例如：</p>
<p><code>\ba\w*\b</code>匹配以字母a开头的单词——先是某个单词开始处(\b)，然后是字母a,然后是任意数量的字母或数字(\w*)，最后是单词结束处(\b)。</p>
<p><code>\d+</code>匹配1个或更多连续的数字。这里的+是和<em>类似的元字符，不同的是</em>匹配重复任意次(可能是0次)，而+则匹配重复1次或更多次。</p>
<p><code>\b\w{6}\b</code> 匹配刚好6个字符的单词。</p>
<p>元字符^和$都匹配一个位置，这和\b有点类似。^匹配要用来查找的字符串的开头，$匹配结尾。这两个代码在验证输入的内容时非常有用，比如一个网站如果要求你填写的QQ号必须为5位到12位数字时，可以使用：<code>^\d{5,12}$</code>。</p>
<p>因为使用了^和$，所以输入的整个字符串都要用来和\d{5,12}来匹配，也就是说整个输入必须是5到12个数字，因此如果输入的QQ号能匹配这个正则表达式的话，那就符合要求了。</p>
<h2 id="字符转义"><a href="#字符转义" class="headerlink" title="字符转义"></a><strong>字符转义</strong></h2><p>如果查找元字符本身的话，比如查找.,或者*,就得使用<code>\</code>来取消这些字符的特殊意义。因此，使用<code>\.</code>和<code>\*</code>。当然，要查找\本身，也得用<code>\\</code>。</p>
<p>例如：<code>deerchao\.cn</code>匹配deerchao.cn，<code>C:\\Windows</code>匹配C:\Windows。</p>
<h2 id="重复"><a href="#重复" class="headerlink" title="重复"></a><strong>重复</strong></h2><table>
<thead>
<tr>
<th>代码/语法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>重复零次或更多次</td>
</tr>
<tr>
<td>+</td>
<td>重复一次或更多次</td>
</tr>
<tr>
<td>?</td>
<td>重复零次或一次</td>
</tr>
<tr>
<td>{n}</td>
<td>重复n次</td>
</tr>
<tr>
<td>{n,}</td>
<td>重复n次或更多次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>重复n到m次</td>
</tr>
</tbody></table>
<h2 id="字符类"><a href="#字符类" class="headerlink" title="字符类"></a><strong>字符类</strong></h2><p>要想查找数字、字母或数字等是很简单的，已经有了对应这些字符集合的元字符，</p>
<p>如果要匹配没有预定义元字符的字符集合，需要在方括号里列出它们</p>
<p>例如：</p>
<p><code>[aeiou]</code>匹配任何一个英文元音字母</p>
<p><code>[.?!]</code>匹配标点符号(.或?或!)</p>
<p><code>[0-9]</code>等同于\d，表示一位数字</p>
<p><code>[a-z0-9A-Z_]</code>匹配数字字母及下划线</p>
<p><code>[\u4e00-\u9fa5]</code>匹配中文字符</p>
<h2 id="分枝条件"><a href="#分枝条件" class="headerlink" title="分枝条件"></a><strong>分枝条件</strong></h2><p>分枝条件指的是有几种规则，如果满足其中任意一种规则都应该当成匹配，具体方法是用 <code>|</code> 把不同的规则分隔开</p>
<p>例如：</p>
<p><code>0\d{2}-\d{8}|0\d{3}-\d{7}</code></p>
<p>这个表达式能匹配两种以连字号分隔的电话号码：一种是三位区号，8位本地号(如010-12345678)，一种是4位区号，7位本地号(0376-2233445)</p>
<p>匹配分枝条件时，将会从左到右地测试每个条件，如果满足了某个分枝的话，就不会去再管其它的条件了，因此，<strong>使用分枝条件时，要注意各个条件的顺序</strong></p>
<h2 id="反义"><a href="#反义" class="headerlink" title="反义"></a><strong>反义</strong></h2><table>
<thead>
<tr>
<th>代码/语法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>\W</td>
<td>匹配任意不是字母，数字，下划线，汉字的字符</td>
</tr>
<tr>
<td>\S</td>
<td>匹配任意不是空白符的字符</td>
</tr>
<tr>
<td>\D</td>
<td>匹配任意非数字的字符</td>
</tr>
<tr>
<td>\B</td>
<td>匹配不是单词开头或结束的位置</td>
</tr>
<tr>
<td>[^x]</td>
<td>匹配除了x以外的任意字符</td>
</tr>
<tr>
<td>[^aeiou]</td>
<td>匹配除了aeiou这几个字母以外的任意字符</td>
</tr>
</tbody></table>
<p>例如：</p>
<p><code>\S+</code>匹配不包含空白符的字符串。</p>
<p><code>&lt;a[^&gt;]+&gt;</code>匹配用尖括号括起来的以a开头的字符串</p>
<h2 id="分组"><a href="#分组" class="headerlink" title="分组"></a><strong>分组</strong></h2><p>如果想要重复多个字符，可以用小括号来指定子表达式(也叫做分组)</p>
<p>例如：</p>
<p><code>((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)</code>匹配IP地址</p>
<h2 id="后向引用"><a href="#后向引用" class="headerlink" title="后向引用"></a><strong>后向引用</strong></h2><p>使用小括号指定一个子表达式后，<strong>匹配这个子表达式的文本</strong>(也就是此分组捕获的内容)可以在表达式或其它程序中作进一步的处理。默认情况下，每个分组会自动拥有一个<strong>组号</strong>，规则是：从左向右，以分组的左括号为标志，第一个出现的分组的组号为1，第二个为2，以此类推。</p>
<p><strong>后向引用</strong>用于重复搜索前面某个分组匹配的文本。例如，<code>\1</code>代表分组1匹配的文本。</p>
<p>例：</p>
<p><code>\b(\w+)\b\s+\1\b</code>可以用来匹配类似go go，ha ha的重复的单词</p>
<p>也可以指定子表达式的<strong>组名</strong>。</p>
<p>语法：<code>(?&lt;name&gt;exp)</code>，或者把尖括号换成’：<code>(?&#39;name&#39;exp)</code></p>
<p>要反向引用这个分组<strong>捕获</strong>的内容，可以使用\k<name></p>
<p>例如：</p>
<p><code>\b(?&lt;Word&gt;\w+)\b\s+\k&lt;Word&gt;\b</code></p>
<table>
<thead>
<tr>
<th>分类</th>
<th>代码/语法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>捕获</td>
<td>(exp)</td>
<td>匹配exp,并捕获文本到自动命名的组里</td>
</tr>
<tr>
<td></td>
<td>(?<name>exp)</td>
<td>匹配exp,并捕获文本到名称为name的组里，也可以写成(?’name’exp)</td>
</tr>
<tr>
<td></td>
<td>(?:exp)</td>
<td>匹配exp,不捕获匹配的文本，也不给此分组分配组号</td>
</tr>
<tr>
<td>零宽断言</td>
<td>(?=exp)</td>
<td>匹配exp前面的位置</td>
</tr>
<tr>
<td></td>
<td>(?&lt;=exp)</td>
<td>匹配exp后面的位置</td>
</tr>
<tr>
<td></td>
<td>(?!exp)</td>
<td>匹配后面跟的不是exp的位置</td>
</tr>
<tr>
<td></td>
<td>(?&lt;!exp)</td>
<td>匹配前面不是exp的位置</td>
</tr>
<tr>
<td>注释</td>
<td>(?#comment)</td>
<td>这种类型的分组不对正则表达式的处理产生任何影响，用于提供注释让人阅读</td>
</tr>
</tbody></table>
<h2 id="零宽断言"><a href="#零宽断言" class="headerlink" title="零宽断言"></a><strong>零宽断言</strong></h2><p>用于查找在某些内容(但并不包括这些内容)之前或之后的东西，也就是说它们像\b,^,$那样用于指定一个位置，这个位置应该满足一定的条件(即断言)，因此被称为<strong>零宽断言</strong>。</p>
<p>例如：</p>
<ol>
<li><code>(?=exp)</code>也叫<strong>零宽度正预测先行断言</strong><code>(什么鬼？)</code>，它断言自身出现的位置的后面能匹配表达式exp。比如 <code>\b\w+(?=ing\b)</code> ，匹配以ing结尾的单词的前面部分(除了ing以外的部分)</li>
<li><code>(?&lt;=exp)</code>也叫<strong>零宽度正回顾后发断言</strong><code>(嘛玩意？)</code>，它断言自身出现的位置的前面能匹配表达式exp。比如 <code>(?&lt;=\bre)\w+\b</code> 会匹配以re开头的单词的后半部分(除了re以外的部分)</li>
<li><code>(?&lt;=\s)\d+(?=\s)</code>匹配以空白符间隔的数字(再次强调，不包括这些空白符)。</li>
</ol>
<h2 id="负向零宽断言"><a href="#负向零宽断言" class="headerlink" title="负向零宽断言"></a><strong>负向零宽断言</strong></h2><p>如果只是想要<strong>确保某个字符没有出现，但并不想去匹配它</strong>时，我们可以尝试使用<strong>负向零宽断言</strong></p>
<p>例如：</p>
<ol>
<li><code>(?!exp)</code>也叫<strong>零宽度负预测先行断言</strong><code>(你说啥？)</code>，断言此位置的后面不能匹配表达式exp。比如： <code>\d{3}(?!\d)</code> 匹配三位数字，而且这三位数字的后面不能是数字；<code>\b((?!abc)\w)+\b</code>匹配不包含连续字符串abc的单词。</li>
<li><code>(?&lt;!exp)</code>也叫<strong>零宽度负回顾后发断言</strong><code>(听不清！)</code>，断言此位置的前面不能匹配表达式exp。比如： <code>(?&lt;![a-z])\d{7}</code> 匹配前面不是小写字母的七位数字。</li>
<li><code>(?&lt;=&lt;(\w+)&gt;).*(?=&lt;\/\1&gt;)</code>匹配不包含属性的简单HTML标签内里的内容。<code>(?&lt;=&lt;(\w+)&gt;)</code>指定了这样的<strong>前缀</strong>：被尖括号括起来的单词(比如可能是<code>&lt;b&gt;</code>)，然后是<code>.*</code>(任意的字符串),最后是一个<strong>后缀</strong><code>(?=&lt;\/\1&gt;)</code>。注意后缀里的<code>\/</code>，它用到了前面提过的字符转义；<code>\1</code>则是一个反向引用，引用的正是捕获的第一组，前面的<code>(\w+)</code>匹配的内容，这样如果前缀实际上是<code>&lt;b&gt;</code>的话，后缀就是<code>&lt;/b&gt;</code>了。整个表达式匹配的是<code>&lt;b&gt;</code>和<code>&lt;/b&gt;</code>之间的内容(再次提醒，不包括前缀和后缀本身)。</li>
</ol>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a><strong>注释</strong></h2><p>小括号的另一种用途是通过语法<code>(?#comment)</code>来包含注释。例如：<code>2[0-4]\d(?#200-249)|25[0-5](?#250-255)|[01]?\d\d?(?#0-199)</code>。</p>
<h2 id="贪婪与懒惰"><a href="#贪婪与懒惰" class="headerlink" title="贪婪与懒惰"></a><strong>贪婪与懒惰</strong></h2><p>当正则表达式中包含能接受重复的限定符时，通常的行为是（在使整个表达式能得到匹配的前提下）匹配<strong>尽可能多</strong>的字符。以这个表达式为例：<code>a.*b</code>，它将会匹配最长的以a开始，以b结束的字符串。如果用它来搜索aabab的话，它会匹配整个字符串aabab。这被称为<strong>贪婪</strong>匹配。</p>
<p>有时，更需要<strong>懒惰</strong>匹配，也就是匹配<strong>尽可能少</strong>的字符。前面给出的限定符都可以被转化为懒惰匹配模式，只要在它后面加上一个问号<code>?</code>。这样<code>.*?</code>就意味着匹配任意数量的重复，但是在能使整个匹配成功的前提下使用最少的重复。现在看看懒惰版的例子吧：</p>
<p><code>a.*?b</code>匹配最短的，以a开始，以b结束的字符串。如果把它应用于aabab的话，它会匹配aab（第一到第三个字符）和ab（第四到第五个字符）。</p>
<table>
<thead>
<tr>
<th>代码/语法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>*?</td>
<td>重复任意次，但尽可能少重复</td>
</tr>
<tr>
<td>+?</td>
<td>重复1次或更多次，但尽可能少重复</td>
</tr>
<tr>
<td>??</td>
<td>重复0次或1次，但尽可能少重复</td>
</tr>
<tr>
<td>{n,m}?</td>
<td>重复n到m次，但尽可能少重复</td>
</tr>
<tr>
<td>{n,}?</td>
<td>重复n次以上，但尽可能少重复</td>
</tr>
</tbody></table>
<h2 id="其他内容"><a href="#其他内容" class="headerlink" title="其他内容"></a><strong>其他内容</strong></h2><p>其他内容可以参考微软官方文档<a href="http://msdn.microsoft.com/zh-cn/library/az24scfc.aspx" target="_blank" rel="noopener">关于正则表达式语言元素的MSDN在线文档</a></p>
<table>
<thead>
<tr>
<th>代码/语法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>\a</td>
<td>报警字符(打印它的效果是电脑嘀一声)</td>
</tr>
<tr>
<td>\b</td>
<td>通常是单词分界位置，但如果在字符类里使用代表退格</td>
</tr>
<tr>
<td>\t</td>
<td>制表符，Tab</td>
</tr>
<tr>
<td>\r</td>
<td>回车</td>
</tr>
<tr>
<td>\v</td>
<td>竖向制表符</td>
</tr>
<tr>
<td>\f</td>
<td>换页符</td>
</tr>
<tr>
<td>\n</td>
<td>换行符</td>
</tr>
<tr>
<td>\e</td>
<td>Escape</td>
</tr>
<tr>
<td>\0nn</td>
<td>ASCII代码中八进制代码为nn的字符</td>
</tr>
<tr>
<td>\xnn</td>
<td>ASCII代码中十六进制代码为nn的字符</td>
</tr>
<tr>
<td>\unnnn</td>
<td>Unicode代码中十六进制代码为nnnn的字符</td>
</tr>
<tr>
<td>\cN</td>
<td>ASCII控制字符。比如\cC代表Ctrl+C</td>
</tr>
<tr>
<td>\A</td>
<td>字符串开头(类似^，但不受处理多行选项的影响)</td>
</tr>
<tr>
<td>\Z</td>
<td>字符串结尾或行尾(不受处理多行选项的影响)</td>
</tr>
<tr>
<td>\z</td>
<td>字符串结尾(类似$，但不受处理多行选项的影响)</td>
</tr>
<tr>
<td>\G</td>
<td>当前搜索的开头</td>
</tr>
<tr>
<td>\p{name}</td>
<td>Unicode中命名为name的字符类，例如\p{IsGreek}</td>
</tr>
<tr>
<td>(?&gt;exp)</td>
<td>贪婪子表达式</td>
</tr>
<tr>
<td>(?<x>-<y>exp)</td>
<td>平衡组</td>
</tr>
<tr>
<td>(?im-nsx:exp)</td>
<td>在子表达式exp中改变处理选项</td>
</tr>
<tr>
<td>(?im-nsx)</td>
<td>为表达式后面的部分改变处理选项</td>
</tr>
<tr>
<td>(?(exp)yes|no)</td>
<td>把exp当作零宽正向先行断言，如果在这个位置能匹配，使用yes作为此组的表达式；否则使用no</td>
</tr>
<tr>
<td>(?(exp)yes)</td>
<td>同上，只是使用空表达式作为no</td>
</tr>
<tr>
<td>(?(name)yes|no)</td>
<td>如果命名为name的组捕获到了内容，使用yes作为表达式；否则使用no</td>
</tr>
<tr>
<td>(?(name)yes)</td>
<td>同上，只是使用空表达式作为no</td>
</tr>
</tbody></table>

      
    </div>
    

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/正则/">正则</a>
    </span>
    

    

    </div>

    

    
      <!-- 来必力City版安装代码 -->
<div id="lv-container" data-id="city" data-uid="MTAyMC80OTkyNC8yNjQxNQ==">
	<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
	</script>
<noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->
    

  </div>
</article>

  






    </main>

    <footer class="site-footer">
  <p class="site-info">
    
    &copy; 2020 Moyuu
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>